var OmniFaces=OmniFaces||{};
OmniFaces.FixViewState=function(){function r(e){var t=e.getElementsByTagName("update");for(var r=0;r<t.length;r++){if(n.exec(t[r].getAttribute("id"))){return t[r].firstChild.nodeValue}}return null}function i(e){var n=e.elements;for(var r=0;r<n.length;r++){if(n[r].name==t){return n[r]}}return null}function s(e,n){var r;try{r=document.createElement("<input name='"+t+"'>")}catch(i){r=document.createElement("input");r.setAttribute("name",t)}r.setAttribute("type","hidden");r.setAttribute("value",n);r.setAttribute("autocomplete","off");e.appendChild(r)}var e={};var t="javax.faces.ViewState";var n=new RegExp("^([\\w]+:)?"+t.replace(/\./g,"\\.")+"(:[0-9]+)?$");e.apply=function(e){if(typeof e==="undefined"){return}var t=r(e);if(!t){return}for(var n=0;n<document.forms.length;n++){var o=document.forms[n];var u=i(o);if(o.method=="post"&&!u){s(o,t)}else if(o.method=="get"&&u){u.parentNode.removeChild(u)}}};return e}();if(typeof jsf!=="undefined"){jsf.ajax.addOnEvent(function(e){if(e.status=="success"){OmniFaces.FixViewState.apply(e.responseXML)}})}if(typeof jQuery!=="undefined"){jQuery(document).ajaxComplete(function(e,t,n){if(typeof t!=="undefined"){OmniFaces.FixViewState.apply(t.responseXML)}})}
